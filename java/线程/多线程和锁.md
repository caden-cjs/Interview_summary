## 死锁

> 死锁,就是两个线程互相获取了对方需要的锁 ,并且等待对面释放自己需要的锁,两个线程互相等待导致死锁的过程!

- 死锁的四个条件

> 1. 互斥条件：**该资源任意适合只可以被一个线程使用。**
> 2. 请求与保持条件：一个进程因**请求资源而阻塞时**，**对已经获得的资源保持不放**！
> 3. 不剥夺条件：线程已获得的条件在未使用完之前不能被其他线程强行剥夺，只有自己使用完毕才释放资源。
> 4. 循环等条件：若干进程之间有一种头尾循环等待资源关系。

- 避免死锁的方法

> 1. 破坏互斥条件：这个条件我们无法解决，锁本身就是互斥的
> 2. 破坏请求保持：一次性获取所有资源，而不是嵌套获取。
> 3. 破坏不剥夺条件：占用资源时，如果获取不到资源，即时释放已经获取到的资源。
> 4. 破坏循环等待条件：靠**按序申请资源来预防**。按**某一顺序申请**资源，释放则**反序释放**资源。

## sleep和wait的共同点和区别

![image-20200622221643704](image-20200622221643704.png)